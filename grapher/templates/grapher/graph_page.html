{% load staticfiles %}

<!DOCTYPE html5>

<html>
    <head>
        <link rel="stylesheet" type="text/css" href="{% static 'grapher/style.css' %}"/>
    </head>
    <body>
        <h1>f(x) = {{ function.name }}</h1>
        <div id="dropdown">
            <span>Dropdown</span>
            <div id="dropdown-content">
                {% for f in function_list %}
                <a href="{% url 'grapher' f.pk %}">{{ f.name }}</a>
                {% endfor %}
            </div>
        </div>
        
        <canvas id="canvas" width="500" height="500" style="border: 1px solid black;"></canvas>
        
        <!--<script type="text/javascript" src="{% static 'grapher/graph2d.js' %}"></script>-->
        <script>
            var canvas = document.getElementById("canvas");
            var context = canvas.getContext("2d");
            
            function drawGraph(points) {
                context.lineWidth = 1;
                context.strokeStyle = "black";
                var c = canvas.width/10;
                context.beginPath();
                context.moveTo(0,canvas.height/2-points[0]*c);
                for (var i = 1; i < points.length; i++) {
                    context.lineTo(i*c/100,canvas.height/2-points[i]*c);
                }
                context.stroke();
            }
            
            function drawAxes() {
                context.strokeStyle = "#999999";
                context.lineWidth = 3;
                context.beginPath();
                context.moveTo(canvas.width/2,0);
                context.lineTo(canvas.width/2,canvas.height);
                context.stroke();
                
                context.beginPath();
                context.moveTo(0,canvas.height/2);
                context.lineTo(canvas.width,canvas.height/2);
                context.stroke();
                
                context.lineWidth = 1;
                for (var i = canvas.width/10; i < canvas.width; i += canvas.width/10) {
                    context.beginPath();
                    context.moveTo(i,0);
                    context.lineTo(i,canvas.height);
                    context.stroke();
                    context.beginPath();
                    context.moveTo(0,i);
                    context.lineTo(canvas.width,i);
                    context.stroke();
                }
            }
            
            var points = [];
            for (var i = 0; i < 1001; i++) {
                var x = (i - 500)/100;
                points[i] = {{ function.script }};
            }
            drawAxes();
            drawGraph(points);
        </script>
        <a href="{% url 'index' %}">Home</a>
    </body>
</html>